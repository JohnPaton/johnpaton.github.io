<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <title>John Paton's Blog - dataviz</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">John Paton's Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/custom-color-schemes-in-matplotlib.html">Custom color schemes in Matplotlib</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-05-11T20:00:00-01:00">
                Published: Thu 11 May 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/john-paton.html">John Paton</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/python.html">python</a> <a href="/tag/dataviz.html">dataviz</a> <a href="/tag/matplotlib.html">matplotlib</a> </p>
</footer><!-- /.post-info --><p>At KPMG, like (I imagine) at most companies, we have a custom color palette that presentations and other materials are supposed to conform to. I actually quite like it when things I produce have a consistent look and feel, so I decided to find out how to make a custom color palette in <a href="https://matplotlib.org/">matplotlib</a>. Turns out that it's super easy.</p>
<p>The first step is to create a <code>.mplstyle</code> file for your color scheme. These can contain a bunch of options, but you can download a sample <a href="http://matplotlib.org/_static/matplotlibrc">here</a>. Way down in line 337 (at the time of writing), you will find the following lines:</p>
<div class="highlight"><pre><span></span><span class="c1">#axes.prop_cycle    : cycler(&#39;color&#39;,</span>
<span class="c1">#                            [&#39;1f77b4&#39;, &#39;ff7f0e&#39;, &#39;2ca02c&#39;, &#39;d62728&#39;,</span>
<span class="c1">#                              &#39;9467bd&#39;, &#39;8c564b&#39;, &#39;e377c2&#39;, &#39;7f7f7f&#39;,</span>
<span class="c1">#                              &#39;bcbd22&#39;, &#39;17becf&#39;])</span>
                                            <span class="c1"># color cycle for plot lines</span>
                                            <span class="c1"># as list of string colorspecs:</span>
                                            <span class="c1"># single letter, long name, or</span>
                                            <span class="c1"># web-style hex</span>
</pre></div>


<p>This setting defines the cycle of colors that matplotlib uses for consecutive elements on plots when you don't specify the colors. Uncomment these lines and swap out the list for a list of your favorite (or corporately imposed) colors. As indicated by the comment, matplotlib will accept <a href="https://matplotlib.org/api/colors_api.html">single letter</a>, <a href="https://www.w3schools.com/colors/colors_names.asp">long name</a>, or hex colors. Use the HTML long name colors to get all your favorites like Gamboge, GrayTeaGreen, and PapayaWhip.</p>
<p><a href="http://math.ubbcluj.ro/~sberinde/wingraph/main.html"><img alt="HTML long name colors vizualized" src="output/images/long_names.gif"></a></p>
<p>Once you've got your color theme specified, you need to save the file in the <code>stylelib</code> directory of your matplotlib <code>configdir</code>. You can find your <code>configdir</code> using</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">get_configdir</span><span class="p">()</span>
<span class="s1">&#39;C:</span><span class="se">\\</span><span class="s1">Users</span><span class="se">\\</span><span class="s1">johnpaton</span><span class="se">\\</span><span class="s1">.matplotlib&#39;</span>
</pre></div>


<p>Save the file as <code>&lt;configdir&gt;/stylelib/&lt;my_style_name&gt;.mplstyle</code>. I called mine <code>kpmg</code> since that's what I'm using it for. The filename is how you refer to the style in your code. You can now use your brand new color scheme to make pretty plots in the same way as you use built in styles:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;kpmg&#39;</span><span class="p">)</span>
</pre></div>


<p>Since all we've done is change the color scheme, you can also use it in combination with other styles and only change their colors. Just make sure your own style is the last one in the list:</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">([</span><span class="s1">&#39;ggplot&#39;</span><span class="p">,</span><span class="s1">&#39;kpmg&#39;</span><span class="p">])</span>
</pre></div>


<p>There are a <a href="http://matplotlib.org/users/customizing.html">bunch more settings</a> that you can define in the matplotlib style file, but since I'm a terrible designer I know I'll make bad choices, so I'll leave that to the experts. For now, I'm just happy to see the exponential growth of colors in my life.</p>
<p><img alt="colors" src="/output/images/colors.png"></p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>